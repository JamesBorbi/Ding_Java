package cn.jpush.alertme.factory.util;/** * Created by chenyueling on 2014/8/18. */import com.google.gson.Gson;import java.io.IOException;import java.io.InputStream;import java.net.URL;import java.text.SimpleDateFormat;import java.util.Calendar;import java.util.Date;/** * 判断是否为法定节假日 */public class LegalFestivalsUtils {    /**     * 返回json {"20140908":"2"}     * <p/>     * 0 代表正常工作日     * <p/>     * 1 休息日     * <p/>     * 2 法定节假日     */    private static final String api = "http://www.easybots.cn/api/holiday.php?d=date";    //给定一个日期判断是否是节假日    public static boolean isLegalFestival(Date date) throws IOException {        int status = queryHoliday(date);        if (status == 2) {            return true;        }        return false;    }    //判断今天是否是节假日    public static boolean isLegalFestivalToday() throws IOException {        int status = queryHoliday(new Date());        if (status == 2) {            return true;        }        return true;    }    public static boolean isLegalFestivalTommrow() throws IOException {        Calendar calendar = Calendar.getInstance();        calendar.add(Calendar.DATE, 1);        Date date = calendar.getTime();        int status = queryHoliday(date);        if (status == 2) {            return true;        }        return false;    }    private static int queryHoliday(Date date) throws IOException {        Gson gson = new Gson();        SimpleDateFormat formatter = new SimpleDateFormat("yyyyMMdd");        String formateDate = formatter.format(date);        String link = api.replace("date", formateDate);        URL url = new URL(link);        InputStream inputStream = url.openStream();        String json = inputStream2String(inputStream);        Holiday holiday = gson.fromJson(json, Holiday.class);        return holiday.status;    }    private class Holiday {        public String date;        public int status;    }    /**     * 将流转成字符串     *     * @param in     * @return     * @throws java.io.IOException     */    private static String inputStream2String(InputStream in) throws IOException {        StringBuffer out = new StringBuffer();        byte[] b = new byte[4096];        for (int n; (n = in.read(b)) != -1; ) {            out.append(new String(b, 0, n));        }        return out.toString();    }    public static void main(String[] args) throws IOException {        System.out.println(isLegalFestivalTommrow());    }}